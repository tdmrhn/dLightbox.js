// dLightbox V2
document.addEventListener("DOMContentLoaded",function(){var e,t,i,a,n,d,c=null,r=0;function o(e,t,a){c=t,i=document.querySelectorAll('[data-lightbox-id="'+e+'"] .dLightbox_slider ul > li').length;var n=document.querySelector('.dLightbox_canvas[data-lightbox-id="'+e+'"]'),d=n.querySelector(".dLightbox_slider ul"),r=document.querySelectorAll('.dLightbox_canvas.active[data-lightbox-id="'+e+'"] .thumbnails-container img');if(d){var o=-(100*c);d.style.transform="translateX("+o+"%)";var l=document.querySelectorAll('[data-lightbox-id="'+e+'"] > figure');if(t<l.length){var s=l[t].querySelector("figcaption"),v=s?s.textContent:"",u=l[t].querySelector("img"),h=u?u.getAttribute("alt"):"";n.querySelector(".dL_count").innerHTML=t+1+"/"+i,n.querySelector(".dL_title").innerHTML=v||h}}r.forEach(function(e){e.classList.remove("active")}),r[t].classList.add("active")}function l(e,t){document.querySelector('.dLightbox_canvas.active[data-lightbox-id="'+e+'"]');var a,n=c;"prev"===t?a=n-1<0?i-1:n-1:"next"===t&&(a=(n+1)%i),o(e,a)}function s(e){var t=document.querySelector('.dLightbox_canvas.active[data-lightbox-id="'+e+'"]');t&&(t.classList.remove("active"),document.body.classList.remove("dL_noscroll"))}document.querySelectorAll(".dLightbox").forEach(function(i,v){var u="dLightbox_"+v;i.setAttribute("data-lightbox-id",u),i.querySelector("a")&&i.addEventListener("click",function(v){v.preventDefault();var h,L,g,b=document.querySelector('.dLightbox_canvas[data-lightbox-id="'+u+'"]');b||(e=(b=function e(t){var i=document.createElement("div");i.classList.add("dLightbox_canvas","active"),i.setAttribute("data-lightbox-id",t),i.innerHTML=`<div><div class="dL_count"></div><div class="dL_title"></div><div class="dL_close">&#x2715;</div></div><div><div class="dL_prev">&#8249;</div><div class="dLightbox_slider"><ul></ul></div><div class="dL_next">&#8250;</div></div>`,document.body.appendChild(i);var a=document.createElement("div");a.classList.add("thumbnails-container");var n=i.querySelector(".dLightbox_slider ul"),d=[];function c(){var e=Math.round(n.scrollLeft/n.clientWidth);d.forEach(function(e){e.classList.remove("active")}),d[e].classList.add("active")}return document.querySelectorAll('[data-lightbox-id="'+t+'"] > figure > a').forEach(function(e,t){var c=e.getAttribute("href"),r=document.createElement("li");r.innerHTML='<img src="'+c+'">';var o=document.createElement("img");o.src=c,o.addEventListener("click",function(){d.forEach(function(e){e.classList.remove("active")}),o.classList.add("active"),n.style.transform="translateX(-"+100*t+"%)"}),d.push(o),a.appendChild(o),i.appendChild(a),n.appendChild(r)}),i.querySelector(".dLightbox_slider").addEventListener("scroll",c),c(),i}(u)).querySelector(".dLightbox_slider"),t=document.querySelector('.dLightbox_canvas[data-lightbox-id="'+u+'"]'),h=u,L=document.querySelector('.dLightbox_canvas.active[data-lightbox-id="'+h+'"]'),g=document.querySelector('.dLightbox_canvas.active[data-lightbox-id="'+h+'"] .dLightbox_slider'),L.addEventListener("click",function(e){let t=e.target.classList;t.contains("dL_prev")?l(h,"prev"):t.contains("dL_next")?l(h,"next"):(t.contains("dL_close")||t.contains("dLightbox_canvas"))&&s(h)}),g.addEventListener("touchstart",function(e){a=e.changedTouches[0].clientX,n=e.changedTouches[0].clientY}),g.addEventListener("touchmove",function(e){Math.abs(e.changedTouches[0].clientX-a)>Math.abs(e.changedTouches[0].clientY-n)&&e.preventDefault()}),g.addEventListener("touchend",function(e){let t=e.changedTouches[0].clientX-a;Math.abs(t)>50&&l(h,t>0?"prev":"next")}),document.body.addEventListener("keydown",function(e){document.querySelector('.dLightbox_canvas.active[data-lightbox-id="'+h+'"]')&&(27===e.keyCode?s(h):(37===e.keyCode||39===e.keyCode)&&l(h,37===e.keyCode?"prev":"next"))}),g.addEventListener("wheel",function(e){e.preventDefault(),l(h,e.deltaY>0?"next":"prev")}),g.addEventListener("mousedown",function(e){d=e.clientX,r=0}),g.addEventListener("mousemove",function(e){r=e.clientX-d}),g.addEventListener("mouseup",function(e){Math.abs(r)>50?l(h,r>0?"prev":"next"):o(h,c)})),document.body.classList.add("dL_noscroll"),b.classList.add("active");var x=v.target.closest("a");if(x){var f=Array.from(i.querySelectorAll("a")).indexOf(x),y=f>c?"next":"prev";o(u,f,y)}})})});