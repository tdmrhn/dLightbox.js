// dLightbox v0.2
document.addEventListener("DOMContentLoaded",function(){var e,t,i,a,n,d,c=null,r=0;function o(e,t,a){c=t,i=document.querySelectorAll('[data-lightbox-id="'+e+'"] .dLightbox_slider ul > li').length;var n=document.querySelector('.dLightbox_canvas[data-lightbox-id="'+e+'"]'),d=n.querySelector(".dLightbox_slider ul"),r=n.querySelectorAll(".dL_thumbnails-container img");if(d){var o=-(100*c);d.style.transform="translateX("+o+"%)";var l=document.querySelectorAll('[data-lightbox-id="'+e+'"] > figure');if(t<l.length){var s=l[t].querySelector("figcaption"),v=s?s.textContent:"",u=l[t].querySelector("img"),L=u?u.getAttribute("alt"):"";n.querySelector(".dL_count").innerHTML=t+1+"/"+i,n.querySelector(".dL_title").innerHTML=v||L}}r&&r.length>t&&(r.forEach(function(e){e.classList.remove("active")}),r[t].classList.add("active"))}function l(e,t){document.querySelector('.dLightbox_canvas.active[data-lightbox-id="'+e+'"]');var a,n=c;"prev"===t?a=n-1<0?i-1:n-1:"next"===t&&(a=(n+1)%i),o(e,a)}function s(e){var t=document.querySelector('.dLightbox_canvas.active[data-lightbox-id="'+e+'"]');t&&(t.classList.remove("active"),document.body.classList.remove("dL_noscroll"))}document.querySelectorAll(".dLightbox").forEach(function(i,v){var u="dLightbox_"+v;i.setAttribute("data-lightbox-id",u),i.querySelector("a")&&i.addEventListener("click",function(v){v.preventDefault();var L,h,g,b=document.querySelector('.dLightbox_canvas[data-lightbox-id="'+u+'"]');b||(e=(b=function e(t){var i,a=document.createElement("div");a.classList.add("dLightbox_canvas","active"),a.setAttribute("data-lightbox-id",t),a.innerHTML='<div class="dL_info-container"><div class="dL_count"></div><div class="dL_title"></div><div class="dL_close">&#x2715;</div></div><div class="dL_slides-container"><div class="dL_prev">&#8249;</div><div class="dLightbox_slider"><ul></ul></div><div class="dL_next">&#8250;</div></div>',document.body.appendChild(a);var n=a.querySelector(".dLightbox_slider ul"),d=[],c=document.querySelector('.dLightbox-thumbnails[data-lightbox-id="'+t+'"]');function r(){var e=Math.round(n.scrollLeft/n.clientWidth);d.forEach(function(e){e.classList.remove("active")}),d[e].classList.add("active")}return c&&(a.classList.add("dLightbox-thumbnails"),(i=document.createElement("div")).classList.add("dL_thumbnails-container"),a.appendChild(i),c.querySelectorAll("a").forEach(function(e,t){var a=e.getAttribute("href"),c=document.createElement("img");c.src=a,c.addEventListener("click",function(){d.forEach(function(e){e.classList.remove("active")}),c.classList.add("active"),n.style.transform="translateX(-"+100*t+"%)"}),d.push(c),i.appendChild(c)})),document.querySelectorAll('[data-lightbox-id="'+t+'"] > figure > a').forEach(function(e,t){var i=e.getAttribute("href"),a=document.createElement("li");a.innerHTML='<img src="'+i+'">';var c=document.createElement("img");c.src=i,c.addEventListener("click",function(){d.forEach(function(e){e.classList.remove("active")}),c.classList.add("active"),n.style.transform="translateX(-"+100*t+"%)"}),d.push(c),n.appendChild(a)}),a.querySelector(".dLightbox_slider").addEventListener("scroll",r),r(),a}(u)).querySelector(".dLightbox_slider"),t=document.querySelector('.dLightbox_canvas[data-lightbox-id="'+u+'"]'),L=u,h=document.querySelector('.dLightbox_canvas.active[data-lightbox-id="'+L+'"]'),g=document.querySelector('.dLightbox_canvas.active[data-lightbox-id="'+L+'"] .dLightbox_slider'),h.addEventListener("click",function(e){let t=e.target.classList;t.contains("dL_prev")?l(L,"prev"):t.contains("dL_next")?l(L,"next"):(t.contains("dL_close")||t.contains("dLightbox_canvas"))&&s(L)}),g.addEventListener("touchstart",function(e){a=e.changedTouches[0].clientX,n=e.changedTouches[0].clientY}),g.addEventListener("touchmove",function(e){Math.abs(e.changedTouches[0].clientX-a)>Math.abs(e.changedTouches[0].clientY-n)&&e.preventDefault()}),g.addEventListener("touchend",function(e){let t=e.changedTouches[0].clientX-a;Math.abs(t)>50&&l(L,t>0?"prev":"next")}),document.body.addEventListener("keydown",function(e){document.querySelector('.dLightbox_canvas.active[data-lightbox-id="'+L+'"]')&&(27===e.keyCode?s(L):(37===e.keyCode||39===e.keyCode)&&l(L,37===e.keyCode?"prev":"next"))}),g.addEventListener("wheel",function(e){e.preventDefault(),l(L,e.deltaY>0?"next":"prev")}),g.addEventListener("mousedown",function(e){d=e.clientX,r=0}),g.addEventListener("mousemove",function(e){r=e.clientX-d}),g.addEventListener("mouseup",function(e){Math.abs(r)>50?l(L,r>0?"prev":"next"):o(L,c)})),document.body.classList.add("dL_noscroll"),b.classList.add("active");var f=v.target.closest("a");if(f){var x=Array.from(i.querySelectorAll("a")).indexOf(f),y=x>c?"next":"prev";o(u,x,y)}})})});